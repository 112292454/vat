# 已知问题

本文档仅记录**已知但尚未修复**的问题。已修复的问题记录在对应模块的技术文档中（`vat/*/readme.md`）。

---

## ASR（语音识别）

### 漏字、错字与同音异字

Whisper 存在漏字、错字和同音不同字的问题。日语场景尤其严重：片假名、平假名、汉字三种写法读音可能相同但含义不同，导致上层处理（如 optimize 阶段的 char diff 校验）将合法的同义替换误判为非法修改。

游戏直播中非完整语句（感叹、拟声词、喊叫等）的漏字尤为明显。非日语场景下此问题相对轻微。

### 幻觉输出

连续人声场景下幻觉较少。主要问题出现在 VTuber 直播的无声序幕（只有画面、无语音的开头段落），Whisper 容易产生幻觉文本。若开启 `condition_on_previous_text`，幻觉会向后蔓延约 1~3 分钟，因此默认配置中该选项已关闭。

### initial_prompt 无通用有效方案

测试了多种 `initial_prompt` 写法（日文/英文/中文、不同内容描述），绝大部分情况下效果变差甚至导致 Whisper 重复 prompt 内容，仅少数情况略有改善。目前无通用有效的写法。详见 [ASR 参数指南](docs/asr_parameters_guide.md)。

### 歌词/BGM 场景识别极差

当前参数配置对 BGM 较强或歌唱片段的识别效果非常差，输出内容大部分由后续大模型 rewrite。可考虑 two-pass 方案（常规识别 + 针对歌唱片段的专用参数/模型），但时间开销和开发成本较高，暂时搁置。

---

## Split（智能断句）

### 断句后偶发时间错位

经 split 后字幕偶尔出现轻微时间错位（延后），但无法稳定复现。时间戳对齐的 diff 算法已做过修复（字符级时间插值），基本消除了明显的错位，但不排除边缘情况仍有微小偏差。此问题留待后续观察。

### 分词策略可进一步优化

当前仅支持配置最大/最小句长（`max_words_cjk`/`min_words_cjk`）。可考虑增加推荐句长（recommended length）或场景自适应句长策略，以提升不同类型视频的断句效果。

---

## Translate（翻译）

### 翻译阶段 chunk 间缺少上下文传递

当前翻译阶段按 chunk 并行处理，chunk 之间无上下文传递（Optimize 阶段已改为带上下文的线性处理）。理论上为翻译阶段添加 chunk 间上下文可提升连贯性，但会将并行处理改为串行，影响处理速度。收益与成本待评估。